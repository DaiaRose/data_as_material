<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Circus Vector Viewer</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 1em; }
    #pan-container {
      position: relative;
      width: 100%;
      height: 80vh;
      overflow: hidden;
      border: 1px solid #ccc;
      transform-origin: 0 0;
    }
    #pan-container img {
      position: absolute;
      width: 60px;
      height: auto;
      transform: translate(-50%, -50%);
      cursor: pointer;
      transition: opacity 0.2s;
    }
    #pan-container img:hover { opacity: 0.8; }
    .tooltip {
      position: fixed;
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      padding: 2px 6px;
      font-size: 12px;
      border-radius: 4px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.1s;
    }
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      padding: 8px 12px;
      border-radius: 4px;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .toast.show { opacity: 1; }
    #resetButton {
      position: fixed;
      top: 1em;
      right: 1em;
      z-index: 1000;
      padding: 0.5em 1em;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <script src="https://unpkg.com/panzoom@9.4.0/dist/panzoom.min.js"></script>
</head>
<body>
  <h1>Circus Vector Viewer</h1>
  <button id="resetButton">Home</button>
  <div id="pan-container"></div>
  <div id="tooltip" class="tooltip"></div>
  <div id="toast" class="toast">Copied!</div>

  <script>
    let panzoomInstance;
    const tooltip = document.getElementById('tooltip');
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 1500);
    }

    fetch('vector_results.csv')
      .then(response => response.text())
      .then(text => {
        const data = Papa.parse(text, { header: true, skipEmptyLines: true }).data
                         .filter(d => d.filename && d.x != null && d.y != null);
        const xs = data.map(d => parseFloat(d.x));
        const ys = data.map(d => parseFloat(d.y));
        const minX = Math.min(...xs), maxX = Math.max(...xs);
        const minY = Math.min(...ys), maxY = Math.max(...ys);

        const container = document.getElementById('pan-container');
        data.forEach(d => {
          const xNorm = (parseFloat(d.x) - minX) / (maxX - minX);
          const yNorm = (parseFloat(d.y) - minY) / (maxY - minY);
          const img = document.createElement('img');
          img.src = 'CircusImages/' + d.filename;
          img.alt = d.filename;
          img.style.left = (xNorm * 100) + '%';
          img.style.top  = (yNorm * 100) + '%';
          img.addEventListener('mouseover', e => {
            tooltip.textContent = d.filename;
            tooltip.style.left = (e.pageX + 5) + 'px';
            tooltip.style.top = (e.pageY + 5) + 'px';
            tooltip.style.opacity = 1;
          });
          img.addEventListener('mouseout', () => { tooltip.style.opacity = 0; });
          img.addEventListener('click', () => {
            navigator.clipboard.writeText(d.filename)
              .then(() => showToast(`Copied: ${d.filename}`))
              .catch(err => console.error('Clipboard error', err));
          });
          container.appendChild(img);
        });

        // Initialize panzoom, prevent zoom-out below original size
        panzoomInstance = panzoom(container, { maxZoom: 5, minZoom: 1, contain: 'outside' });
        // Zoom with wheel
        container.addEventListener('wheel', panzoomInstance.zoomWithWheel);
        // Double-click toggles between 1× and 2× zoom at cursor
        container.addEventListener('dblclick', e => {
          e.preventDefault();
          const rect = container.getBoundingClientRect();
          const cx = e.clientX - rect.left;
          const cy = e.clientY - rect.top;
          const currentScale = panzoomInstance.getScale();
          const newScale = currentScale === 1 ? 2 : 1;
          panzoomInstance.zoomTo(cx, cy, newScale);
        });
        // Home button resets view
        document.getElementById('resetButton').addEventListener('click', () => {
          // center then reset zoom
          const { clientWidth: w, clientHeight: h } = container;
          panzoomInstance.moveTo(0, 0);
          panzoomInstance.zoomTo(w/2, h/2, 1);
        });
      })
      .catch(console.error);
  </script>
</body>
</html>













<!-- i like thiw verion -->
<!-- vectorView.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Circus Vector Viewer</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 1em; }
    .canvas { position: relative; width: 100%; height: 80vh; border: 1px solid #ccc; }
    .canvas img { position: absolute; width: 60px; height: auto; transform: translate(-50%, -50%); cursor: pointer; }
    .canvas img:hover { opacity: 0.8; }
    .tooltip {
      position: fixed;
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      padding: 2px 6px;
      font-size: 12px;
      border-radius: 4px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.1s;
    }
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      padding: 8px 12px;
      border-radius: 4px;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .toast.show { opacity: 1; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
</head>
<body>
  <h1>Circus Vector Viewer</h1>
  <div class="canvas" id="canvas"></div>
  <div id="tooltip" class="tooltip"></div>
  <div id="toast" class="toast">Copied!</div>

  <script>
    const canvas = document.getElementById('canvas');
    const tooltip = document.getElementById('tooltip');
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 1500);
    }

    fetch('vector_results.csv')
      .then(response => response.text())
      .then(text => {
        const data = Papa.parse(text, { header: true, skipEmptyLines: true }).data
                        .filter(d => d.filename && d.x && d.y);
        const xs = data.map(d => parseFloat(d.x));
        const ys = data.map(d => parseFloat(d.y));
        const minX = Math.min(...xs), maxX = Math.max(...xs);
        const minY = Math.min(...ys), maxY = Math.max(...ys);

        data.forEach(d => {
          const xNorm = (parseFloat(d.x) - minX) / (maxX - minX);
          const yNorm = (parseFloat(d.y) - minY) / (maxY - minY);

          const img = document.createElement('img');
          img.src = 'CircusImages/' + d.filename;
          img.alt = d.filename;
          img.style.left = (xNorm * 100) + '%';
          img.style.top = (yNorm * 100) + '%';

          // Tooltip on hover
          img.addEventListener('mouseover', (e) => {
            tooltip.textContent = d.filename;
            tooltip.style.left = (e.pageX + 5) + 'px';
            tooltip.style.top = (e.pageY + 5) + 'px';
            tooltip.style.opacity = 1;
          });
          img.addEventListener('mouseout', () => {
            tooltip.style.opacity = 0;
          });

          // Copy filename on click
          img.addEventListener('click', () => {
            navigator.clipboard.writeText(d.filename)
              .then(() => showToast(`Copied: ${d.filename}`))
              .catch(err => console.error('Clipboard error', err));
          });

          canvas.appendChild(img);
        });
      })
      .catch(console.error);
  </script>
</body>
</html> -->

